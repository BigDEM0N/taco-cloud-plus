2024-03-20 00:45:14,125 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-03-20 00:45:14,159 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-03-20 00:45:14,290 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-03-20 00:45:14,337 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-03-20 00:45:14,701 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-03-20 00:45:14,702 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-03-20 00:45:14,703 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-03-20 00:45:14,707 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-03-20 00:45:14,710 INFO The number of active nodes increment to 1.

2024-03-20 00:45:14,749 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-03-20 00:45:14,750 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-03-20 00:45:14,751 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-03-20 00:45:14,754 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-03-20 00:45:14,757 INFO The number of active nodes increment to 1.

2024-03-20 00:45:14,932 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 2, cost 0 ms.

2024-03-20 00:45:14,937 INFO Starts FSMCaller successfully.

2024-03-20 00:45:14,948 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 2, cost 0 ms.

2024-03-20 00:45:14,954 INFO Starts FSMCaller successfully.

2024-03-20 00:45:14,948 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:14,968 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:15,043 INFO Node <naming_persistent_service/nacos-server-3:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:15,044 INFO Node <naming_persistent_service/nacos-server-3:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:15,049 INFO Node <naming_persistent_service/nacos-server-1:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:15,050 INFO Node <naming_persistent_service/nacos-server-1:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:15,058 INFO Node <naming_persistent_service/nacos-server-3:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:15,060 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:15,060 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:15,061 INFO Node <naming_persistent_service/nacos-server-1:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:15,062 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:15,063 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:15,065 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:15,066 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:15,262 INFO Creating new channel to: nacos-server-3:7848.

2024-03-20 00:45:15,262 INFO Creating new channel to: nacos-server-3:7848.

2024-03-20 00:45:15,322 INFO The channel nacos-server-3:7848 is in state: CONNECTING.

2024-03-20 00:45:15,351 INFO The channel nacos-server-3:7848 is in state: CONNECTING.

2024-03-20 00:45:15,646 INFO The channel nacos-server-3:7848 is in state: READY.

2024-03-20 00:45:15,654 INFO The channel nacos-server-3:7848 has successfully established.

2024-03-20 00:45:15,656 INFO The channel nacos-server-3:7848 is in state: READY.

2024-03-20 00:45:15,657 INFO The channel nacos-server-3:7848 has successfully established.

2024-03-20 00:45:15,814 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 00:45:15,819 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 00:45:15,824 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 00:45:15,829 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 00:45:15,854 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 00:45:15,855 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 00:45:15,860 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 00:45:15,861 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 00:45:15,899 INFO Creating new channel to: nacos-server-1:7848.

2024-03-20 00:45:15,903 INFO The channel nacos-server-1:7848 is in state: CONNECTING.

2024-03-20 00:45:15,903 INFO Creating new channel to: nacos-server-1:7848.

2024-03-20 00:45:15,905 INFO The channel nacos-server-1:7848 is in state: CONNECTING.

2024-03-20 00:45:15,927 INFO The channel nacos-server-1:7848 is in state: READY.

2024-03-20 00:45:15,928 INFO The channel nacos-server-1:7848 has successfully established.

2024-03-20 00:45:15,930 INFO The channel nacos-server-1:7848 is in state: READY.

2024-03-20 00:45:15,931 INFO The channel nacos-server-1:7848 has successfully established.

2024-03-20 00:45:19,206 INFO The number of active nodes increment to 2.

2024-03-20 00:45:19,218 INFO The number of active nodes increment to 2.

2024-03-20 00:45:19,343 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 0 to 2, cost 1 ms.

2024-03-20 00:45:19,351 INFO Starts FSMCaller successfully.

2024-03-20 00:45:19,351 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 0 to 2, cost 0 ms.

2024-03-20 00:45:19,354 INFO Starts FSMCaller successfully.

2024-03-20 00:45:19,356 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:19,356 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:19,372 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:19,373 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:19,375 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:19,376 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:19,384 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:19,385 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:19,386 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:19,387 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:19,390 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:19,391 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:19,394 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:19,396 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:19,413 INFO The number of active nodes increment to 3.

2024-03-20 00:45:19,442 INFO The number of active nodes increment to 3.

2024-03-20 00:45:19,550 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 0 to 2, cost 0 ms.

2024-03-20 00:45:19,553 INFO Starts FSMCaller successfully.

2024-03-20 00:45:19,555 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:19,556 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 0 to 2, cost 0 ms.

2024-03-20 00:45:19,557 INFO Starts FSMCaller successfully.

2024-03-20 00:45:19,560 INFO Node <naming_instance_metadata/nacos-server-1:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:19,560 INFO Node <naming_instance_metadata/nacos-server-1:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:19,562 INFO Node <naming_instance_metadata/nacos-server-1:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:19,564 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:19,564 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:19,565 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:19,572 INFO Node <naming_instance_metadata/nacos-server-3:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:19,573 INFO Node <naming_instance_metadata/nacos-server-3:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:19,574 INFO The number of active nodes increment to 4.

2024-03-20 00:45:19,575 INFO Node <naming_instance_metadata/nacos-server-3:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:19,577 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:19,578 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:19,585 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:19,592 INFO The number of active nodes increment to 4.

2024-03-20 00:45:19,598 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 2 to 2, cost 1 ms.

2024-03-20 00:45:19,686 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 0 to 2, cost 0 ms.

2024-03-20 00:45:19,690 INFO Starts FSMCaller successfully.

2024-03-20 00:45:19,691 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:19,695 INFO Node <naming_service_metadata/nacos-server-1:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:19,696 INFO Node <naming_service_metadata/nacos-server-1:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:19,698 INFO Node <naming_service_metadata/nacos-server-1:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:19,699 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 0 to 2, cost 1 ms.

2024-03-20 00:45:19,699 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:19,701 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:19,701 INFO Starts FSMCaller successfully.

2024-03-20 00:45:19,707 INFO Loading snapshot, meta=last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"
.

2024-03-20 00:45:19,714 INFO Node <naming_service_metadata/nacos-server-3:7848> onSnapshotLoadDone, last_included_index: 1
last_included_term: 1
peers: "nacos-server-3:7848"
peers: "nacos-server-2:7848"
peers: "nacos-server-1:7848"


2024-03-20 00:45:19,714 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:19,715 INFO Node <naming_service_metadata/nacos-server-3:7848> target priority value has changed from: 0, to: -1.

2024-03-20 00:45:19,717 INFO Node <naming_service_metadata/nacos-server-3:7848> init, term=1, lastLogId=LogId [index=1, term=1], conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:19,718 WARN RPC server is not started in RaftGroupService.

2024-03-20 00:45:19,718 INFO Start the RaftGroupService successfully.

2024-03-20 00:45:19,738 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 00:45:20,467 INFO Node <naming_persistent_service/nacos-server-1:7848> term 1 start preVote.

2024-03-20 00:45:20,470 INFO Node <naming_persistent_service/nacos-server-3:7848> term 1 start preVote.

2024-03-20 00:45:20,471 INFO Creating new channel to: nacos-server-3:7848.

2024-03-20 00:45:20,472 INFO Creating new channel to: nacos-server-1:7848.

2024-03-20 00:45:20,474 INFO The channel nacos-server-1:7848 is in state: CONNECTING.

2024-03-20 00:45:20,474 INFO The channel nacos-server-3:7848 is in state: CONNECTING.

2024-03-20 00:45:20,478 INFO The channel nacos-server-1:7848 is in state: READY.

2024-03-20 00:45:20,478 INFO The channel nacos-server-3:7848 is in state: READY.

2024-03-20 00:45:20,479 INFO The channel nacos-server-1:7848 has successfully established.

2024-03-20 00:45:20,480 INFO The channel nacos-server-3:7848 has successfully established.

2024-03-20 00:45:20,483 INFO Peer nacos-server-1:7848 is connected.

2024-03-20 00:45:20,489 INFO Peer nacos-server-3:7848 is connected.

2024-03-20 00:45:20,495 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 00:45:20,497 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 00:45:20,507 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 00:45:20,509 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 00:45:20,510 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 00:45:20,509 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 00:45:20,512 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 00:45:20,526 INFO Node <naming_persistent_service/nacos-server-3:7848> received PreVoteRequest from nacos-server-1:7848, term=2, currTerm=1, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:20,539 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 00:45:20,540 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 00:45:20,541 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 00:45:20,585 INFO Node <naming_persistent_service/nacos-server-3:7848> received PreVoteResponse from nacos-server-2:7848, term=1, granted=true.

2024-03-20 00:45:20,586 INFO Node <naming_persistent_service/nacos-server-3:7848> start vote and grant vote self, term=1.

2024-03-20 00:45:20,594 INFO Node <naming_persistent_service/nacos-server-1:7848> received PreVoteRequest from nacos-server-3:7848, term=2, currTerm=1, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:20,596 INFO Node <naming_persistent_service/nacos-server-1:7848> received PreVoteResponse from nacos-server-3:7848, term=1, granted=true.

2024-03-20 00:45:20,597 INFO Node <naming_persistent_service/nacos-server-1:7848> start vote and grant vote self, term=1.

2024-03-20 00:45:20,599 INFO Node <naming_persistent_service/nacos-server-1:7848> received RequestVoteRequest from nacos-server-3:7848, term=2, currTerm=2.

2024-03-20 00:45:20,618 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=2, votedFor=nacos-server-3:7848, cost time=24 ms

2024-03-20 00:45:20,620 WARN Node <naming_persistent_service/nacos-server-3:7848> received invalid PreVoteResponse from nacos-server-1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-03-20 00:45:20,621 INFO Node <naming_persistent_service/nacos-server-3:7848> received RequestVoteRequest from nacos-server-1:7848, term=2, currTerm=2.

2024-03-20 00:45:20,641 INFO Node <naming_persistent_service/nacos-server-3:7848> received PreVoteRequest from nacos-server-2:7848, term=2, currTerm=2, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:20,645 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=2, votedFor=nacos-server-1:7848, cost time=42 ms

2024-03-20 00:45:20,722 INFO Node <naming_persistent_service/nacos-server-1:7848> received PreVoteRequest from nacos-server-2:7848, term=2, currTerm=2, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:20,729 WARN Node <naming_persistent_service/nacos-server-1:7848> received invalid PreVoteResponse from nacos-server-2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-03-20 00:45:20,826 INFO Node <naming_persistent_service/nacos-server-3:7848> become leader of group, term=2, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:20,837 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-1:7848, waitId=-1, type=Follower]@nacos-server-1:7848 is started

2024-03-20 00:45:20,858 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=-1, type=Follower]@nacos-server-2:7848 is started

2024-03-20 00:45:20,886 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-03-20 00:45:20,978 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-03-20 00:45:21,085 INFO onLeaderStart: term=2.

2024-03-20 00:45:24,409 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> term 1 start preVote.

2024-03-20 00:45:24,410 INFO Creating new channel to: nacos-server-1:7848.

2024-03-20 00:45:24,411 INFO The channel nacos-server-1:7848 is in state: CONNECTING.

2024-03-20 00:45:24,413 INFO The channel nacos-server-1:7848 is in state: READY.

2024-03-20 00:45:24,413 INFO The channel nacos-server-1:7848 has successfully established.

2024-03-20 00:45:24,414 INFO Peer nacos-server-1:7848 is connected.

2024-03-20 00:45:24,417 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 00:45:24,417 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> received PreVoteRequest from nacos-server-3:7848, term=2, currTerm=1, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:24,418 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 00:45:24,420 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 00:45:24,420 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 00:45:24,421 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 00:45:24,423 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> received PreVoteResponse from nacos-server-1:7848, term=1, granted=true.

2024-03-20 00:45:24,423 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> start vote and grant vote self, term=1.

2024-03-20 00:45:24,425 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> received RequestVoteRequest from nacos-server-3:7848, term=2, currTerm=1.

2024-03-20 00:45:24,442 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=2, votedFor=nacos-server-3:7848, cost time=18 ms

2024-03-20 00:45:24,442 WARN Node <naming_persistent_service_v2/nacos-server-3:7848> received invalid PreVoteResponse from nacos-server-2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-03-20 00:45:24,447 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=2, votedFor=0.0.0.0:0, cost time=20 ms

2024-03-20 00:45:24,462 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=2, votedFor=nacos-server-3:7848, cost time=15 ms

2024-03-20 00:45:24,464 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> become leader of group, term=2, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:24,464 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-1:7848, waitId=-1, type=Follower]@nacos-server-1:7848 is started

2024-03-20 00:45:24,465 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=-1, type=Follower]@nacos-server-2:7848 is started

2024-03-20 00:45:24,468 WARN Node <naming_persistent_service_v2/nacos-server-3:7848> received invalid RequestVoteResponse from nacos-server-2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-03-20 00:45:24,478 INFO onLeaderStart: term=2.

2024-03-20 00:45:24,665 INFO Node <naming_instance_metadata/nacos-server-1:7848> term 1 start preVote.

2024-03-20 00:45:24,666 INFO Creating new channel to: nacos-server-3:7848.

2024-03-20 00:45:24,667 INFO The channel nacos-server-3:7848 is in state: CONNECTING.

2024-03-20 00:45:24,669 INFO The channel nacos-server-3:7848 is in state: READY.

2024-03-20 00:45:24,669 INFO The channel nacos-server-3:7848 has successfully established.

2024-03-20 00:45:24,670 INFO Peer nacos-server-3:7848 is connected.

2024-03-20 00:45:24,673 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 00:45:24,673 INFO Node <naming_instance_metadata/nacos-server-3:7848> received PreVoteRequest from nacos-server-1:7848, term=2, currTerm=1, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:24,674 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 00:45:24,677 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 00:45:24,677 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 00:45:24,678 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 00:45:24,680 INFO Node <naming_instance_metadata/nacos-server-1:7848> received PreVoteResponse from nacos-server-3:7848, term=1, granted=true.

2024-03-20 00:45:24,680 INFO Node <naming_instance_metadata/nacos-server-1:7848> start vote and grant vote self, term=1.

2024-03-20 00:45:24,683 INFO Node <naming_instance_metadata/nacos-server-3:7848> received RequestVoteRequest from nacos-server-1:7848, term=2, currTerm=1.

2024-03-20 00:45:24,699 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=2, votedFor=nacos-server-1:7848, cost time=18 ms

2024-03-20 00:45:24,700 WARN Node <naming_instance_metadata/nacos-server-1:7848> received invalid PreVoteResponse from nacos-server-2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-03-20 00:45:24,704 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=2, votedFor=0.0.0.0:0, cost time=21 ms

2024-03-20 00:45:24,720 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=2, votedFor=nacos-server-1:7848, cost time=15 ms

2024-03-20 00:45:24,721 INFO Node <naming_instance_metadata/nacos-server-1:7848> become leader of group, term=2, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 00:45:24,729 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-3:7848, waitId=-1, type=Follower]@nacos-server-3:7848 is started

2024-03-20 00:45:24,733 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=-1, type=Follower]@nacos-server-2:7848 is started

2024-03-20 00:45:24,734 WARN Node <naming_instance_metadata/nacos-server-1:7848> received invalid RequestVoteResponse from nacos-server-2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-03-20 00:45:24,749 INFO onLeaderStart: term=2.

2024-03-20 00:45:24,992 INFO Node <naming_service_metadata/nacos-server-3:7848> received PreVoteRequest from nacos-server-2:7848, term=2, currTerm=1, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:24,998 INFO Node <naming_service_metadata/nacos-server-1:7848> received PreVoteRequest from nacos-server-2:7848, term=2, currTerm=1, granted=true, requestLastLogId=LogId [index=1, term=1], lastLogId=LogId [index=1, term=1].

2024-03-20 00:45:25,004 INFO Node <naming_service_metadata/nacos-server-3:7848> received RequestVoteRequest from nacos-server-2:7848, term=2, currTerm=1.

2024-03-20 00:45:25,004 INFO Node <naming_service_metadata/nacos-server-1:7848> received RequestVoteRequest from nacos-server-2:7848, term=2, currTerm=1.

2024-03-20 00:45:25,023 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=2, votedFor=0.0.0.0:0, cost time=18 ms

2024-03-20 00:45:25,023 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=2, votedFor=0.0.0.0:0, cost time=18 ms

2024-03-20 00:45:25,038 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=2, votedFor=nacos-server-2:7848, cost time=14 ms

2024-03-20 00:45:25,043 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=2, votedFor=nacos-server-2:7848, cost time=19 ms

2024-03-20 01:01:48,644 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_2.

2024-03-20 01:01:48,645 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_2.

2024-03-20 01:01:48,650 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_1.

2024-03-20 01:01:48,656 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:02:19,454 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_2.

2024-03-20 01:02:19,455 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_2.

2024-03-20 01:02:19,459 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_1.

2024-03-20 01:02:19,465 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:03:18,325 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_2.

2024-03-20 01:03:18,325 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_2.

2024-03-20 01:03:18,331 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_1.

2024-03-20 01:03:18,337 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:07:02,530 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_2.

2024-03-20 01:07:02,531 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_2.

2024-03-20 01:07:02,536 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_1.

2024-03-20 01:07:02,542 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:07:11,913 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_2.

2024-03-20 01:07:11,914 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_2.

2024-03-20 01:07:11,919 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_1.

2024-03-20 01:07:11,925 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:12:03,039 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_2.

2024-03-20 01:12:03,040 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_2.

2024-03-20 01:12:03,045 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_1.

2024-03-20 01:12:03,052 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:12:06,686 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_2.

2024-03-20 01:12:06,687 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_2.

2024-03-20 01:12:06,692 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_1.

2024-03-20 01:12:06,698 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:12:20,916 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_2.

2024-03-20 01:12:20,917 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_2.

2024-03-20 01:12:20,922 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_1.

2024-03-20 01:12:20,928 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 2 to 2, cost 0 ms.

2024-03-20 01:15:20,626 INFO The channel nacos-server-3:7848 is in state: IDLE.

2024-03-20 01:15:20,810 INFO The channel nacos-server-2:7848 is in state: IDLE.

2024-03-20 01:15:25,627 INFO Connection disconnected: /192.168.56.6:46120

2024-03-20 01:15:25,647 INFO Connection disconnected: /192.168.56.8:57580

2024-03-20 01:15:25,728 INFO Connection disconnected: /192.168.56.8:54552

2024-03-20 01:23:37,893 WARN Fail to issue RPC to nacos-server-3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499986680s. [closed=[], open=[[remote_addr=nacos-server-3/192.168.56.3:7848]]]]

2024-03-20 01:23:35,263 INFO Node <naming_instance_metadata/nacos-server-3:7848> term 2 start preVote.

2024-03-20 01:23:46,201 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> term 2 start preVote.

2024-03-20 01:23:48,255 WARN Fail to issue RPC to nacos-server-1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499976333s. [closed=[], open=[[remote_addr=nacos-server-1/192.168.56.6:7848]]]]

2024-03-20 01:23:46,201 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-3:7848, term=2, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos-server-3:7848.]].

2024-03-20 01:23:48,111 WARN Fail to issue RPC to nacos-server-1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499976923s. [closed=[], open=[[remote_addr=nacos-server-1/192.168.56.6:7848]]]]

2024-03-20 01:23:41,034 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-2:7848, term=2, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos-server-2:7848.]].

2024-03-20 01:23:45,651 WARN Fail to issue RPC to nacos-server-2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499986751s. [closed=[], open=[[remote_addr=nacos-server-2/192.168.56.8:7848]]]]

2024-03-20 01:23:41,034 INFO Node <naming_service_metadata/nacos-server-1:7848> term 2 start preVote.

2024-03-20 01:23:45,650 WARN Node <naming_persistent_service_v2/nacos-server-3:7848> steps down when alive nodes don't satisfy quorum, term=2, deadNodes=nacos-server-2:7848,nacos-server-1:7848, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848.

2024-03-20 01:23:40,459 WARN Fail to issue RPC to nacos-server-2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499962955s. [closed=[], open=[[remote_addr=nacos-server-2/192.168.56.8:7848]]]]

2024-03-20 01:23:40,469 WARN Fail to issue RPC to nacos-server-2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499947587s. [closed=[], open=[[remote_addr=nacos-server-2/192.168.56.8:7848]]]]

2024-03-20 01:23:40,469 WARN Node <naming_persistent_service/nacos-server-3:7848> steps down when alive nodes don't satisfy quorum, term=2, deadNodes=nacos-server-2:7848,nacos-server-1:7848, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848.

2024-03-20 01:23:41,030 WARN Node <naming_instance_metadata/nacos-server-1:7848> steps down when alive nodes don't satisfy quorum, term=2, deadNodes=nacos-server-3:7848,nacos-server-2:7848, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848.

2024-03-20 01:23:35,263 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-1:7848, term=2, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos-server-1:7848.]].

2024-03-20 01:23:50,120 INFO Creating new channel to: nacos-server-3:7848.

2024-03-20 01:23:50,118 INFO Creating new channel to: nacos-server-1:7848.

2024-03-20 01:23:50,430 INFO Creating new channel to: nacos-server-3:7848.

2024-03-20 01:23:50,445 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-03-20 01:23:50,445 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=2, lastLogIncluded=0, lastLogIndex=2, lastTermIncluded=0>, peerId=nacos-server-1:7848, waitId=1, type=Follower] is going to quit

2024-03-20 01:23:50,465 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-03-20 01:23:50,465 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=2, lastLogIncluded=0, lastLogIndex=2, lastTermIncluded=0>, peerId=nacos-server-3:7848, waitId=2, type=Follower] is going to quit

2024-03-20 01:23:50,454 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-03-20 01:23:50,818 INFO The channel nacos-server-3:7848 is in state: CONNECTING.

2024-03-20 01:23:50,454 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=2, lastLogIncluded=0, lastLogIndex=2, lastTermIncluded=0>, peerId=nacos-server-1:7848, waitId=2, type=Follower] is going to quit

2024-03-20 01:23:50,840 INFO The channel nacos-server-3:7848 is in state: CONNECTING.

2024-03-20 01:23:50,839 INFO The channel nacos-server-1:7848 is in state: CONNECTING.

2024-03-20 01:23:51,097 INFO Node <naming_persistent_service/nacos-server-1:7848> ignore PreVoteRequest from nacos-server-2:7848, term=3, currTerm=2, because the leader nacos-server-3:7848's lease is still valid.

2024-03-20 01:23:51,091 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=2, lastLogIncluded=0, lastLogIndex=2, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=2, type=Follower] is going to quit

2024-03-20 01:23:51,106 INFO The channel nacos-server-3:7848 is in state: READY.

2024-03-20 01:23:51,102 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=2, lastLogIncluded=0, lastLogIndex=2, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=1, type=Follower] is going to quit

2024-03-20 01:23:51,097 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=2, lastLogIncluded=0, lastLogIndex=2, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=1, type=Follower] is going to quit

2024-03-20 01:23:51,107 INFO The channel nacos-server-1:7848 is in state: READY.

2024-03-20 01:23:51,115 INFO Node <naming_persistent_service/nacos-server-3:7848> received PreVoteRequest from nacos-server-2:7848, term=3, currTerm=2, granted=true, requestLastLogId=LogId [index=2, term=2], lastLogId=LogId [index=2, term=2].

2024-03-20 01:23:51,102 INFO The channel nacos-server-3:7848 is in state: READY.

2024-03-20 01:23:51,115 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos-server-3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:51,113 INFO The channel nacos-server-3:7848 has successfully established.

2024-03-20 01:23:51,148 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> received PreVoteRequest from nacos-server-2:7848, term=3, currTerm=2, granted=true, requestLastLogId=LogId [index=2, term=2], lastLogId=LogId [index=2, term=2].

2024-03-20 01:23:51,160 INFO The channel nacos-server-3:7848 has successfully established.

2024-03-20 01:23:51,148 INFO The channel nacos-server-1:7848 has successfully established.

2024-03-20 01:23:51,163 INFO Peer nacos-server-3:7848 is connected.

2024-03-20 01:23:51,165 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos-server-3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:51,166 INFO Peer nacos-server-3:7848 is connected.

2024-03-20 01:23:51,169 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 01:23:51,168 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> received PreVoteRequest from nacos-server-1:7848, term=3, currTerm=2, granted=true, requestLastLogId=LogId [index=2, term=2], lastLogId=LogId [index=2, term=2].

2024-03-20 01:23:51,169 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 01:23:51,168 INFO Node <naming_service_metadata/nacos-server-3:7848> ignore PreVoteRequest from nacos-server-1:7848, term=3, currTerm=2, because the leader nacos-server-2:7848's lease is still valid.

2024-03-20 01:23:51,257 INFO Node <naming_instance_metadata/nacos-server-1:7848> received PreVoteRequest from nacos-server-3:7848, term=3, currTerm=2, granted=true, requestLastLogId=LogId [index=2, term=2], lastLogId=LogId [index=2, term=2].

2024-03-20 01:23:51,169 INFO Peer nacos-server-1:7848 is connected.

2024-03-20 01:23:51,278 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 01:23:51,173 INFO Creating new channel to: nacos-server-2:7848.

2024-03-20 01:23:51,282 INFO Node <naming_persistent_service/nacos-server-1:7848> received RequestVoteRequest from nacos-server-2:7848, term=3, currTerm=2.

2024-03-20 01:23:51,281 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos-server-3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:51,285 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 01:23:51,295 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 01:23:51,289 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> received RequestVoteRequest from nacos-server-2:7848, term=3, currTerm=2.

2024-03-20 01:23:51,295 INFO Node <naming_instance_metadata/nacos-server-1:7848> received PreVoteRequest from nacos-server-2:7848, term=3, currTerm=2, granted=true, requestLastLogId=LogId [index=2, term=2], lastLogId=LogId [index=2, term=2].

2024-03-20 01:23:51,293 INFO Node <naming_persistent_service/nacos-server-3:7848> received RequestVoteRequest from nacos-server-2:7848, term=3, currTerm=2.

2024-03-20 01:23:51,295 INFO The channel nacos-server-2:7848 is in state: CONNECTING.

2024-03-20 01:23:51,296 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-3:7848, term=2, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-03-20 01:23:51,314 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 01:23:51,302 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 01:23:51,316 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 01:23:51,303 INFO The channel nacos-server-2:7848 is in state: READY.

2024-03-20 01:23:51,320 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 01:23:51,308 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos-server-1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:51,324 INFO Node <naming_instance_metadata/nacos-server-3:7848> ignore PreVoteRequest from nacos-server-2:7848, term=3, currTerm=2, because the leader nacos-server-1:7848's lease is still valid.

2024-03-20 01:23:51,329 INFO Node <naming_instance_metadata/nacos-server-3:7848> received PreVoteResponse from nacos-server-1:7848, term=2, granted=true.

2024-03-20 01:23:51,313 INFO Node <naming_instance_metadata/nacos-server-1:7848> received RequestVoteRequest from nacos-server-2:7848, term=3, currTerm=2.

2024-03-20 01:23:51,451 INFO Node <naming_instance_metadata/nacos-server-3:7848> start vote and grant vote self, term=2.

2024-03-20 01:23:51,318 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 01:23:51,322 INFO Node <naming_service_metadata/nacos-server-1:7848> received PreVoteResponse from nacos-server-3:7848, term=2, granted=false.

2024-03-20 01:23:51,485 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-1:7848, term=2, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-03-20 01:23:51,322 INFO The channel nacos-server-2:7848 has successfully established.

2024-03-20 01:23:51,489 INFO Node <naming_service_metadata/nacos-server-1:7848> received PreVoteResponse from nacos-server-2:7848, term=2, granted=true.

2024-03-20 01:23:51,493 INFO Peer nacos-server-2:7848 is connected.

2024-03-20 01:23:51,497 INFO Node <naming_service_metadata/nacos-server-1:7848> start vote and grant vote self, term=2.

2024-03-20 01:23:51,497 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> ignore PreVoteRequest from nacos-server-2:7848, term=3, currTerm=2, because the leader nacos-server-3:7848's lease is still valid.

2024-03-20 01:23:51,500 INFO Node <naming_service_metadata/nacos-server-3:7848> received RequestVoteRequest from nacos-server-1:7848, term=3, currTerm=2.

2024-03-20 01:23:51,499 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-2:7848, term=2, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-03-20 01:23:51,503 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-2:7848, term=2, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-03-20 01:23:51,501 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> received PreVoteResponse from nacos-server-3:7848, term=2, granted=true.

2024-03-20 01:23:51,546 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> start vote and grant vote self, term=2.

2024-03-20 01:23:52,534 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=3, votedFor=nacos-server-3:7848, cost time=1049 ms

2024-03-20 01:23:52,534 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=3, votedFor=0.0.0.0:0, cost time=1238 ms

2024-03-20 01:23:52,534 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=3, votedFor=0.0.0.0:0, cost time=1054 ms

2024-03-20 01:23:53,787 INFO Node <naming_instance_metadata/nacos-server-3:7848> received RequestVoteRequest from nacos-server-2:7848, term=3, currTerm=3.

2024-03-20 01:23:54,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=3, votedFor=0.0.0.0:0, cost time=3235 ms

2024-03-20 01:23:54,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=3, votedFor=nacos-server-1:7848, cost time=3039 ms

2024-03-20 01:23:54,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=3, votedFor=0.0.0.0:0, cost time=3047 ms

2024-03-20 01:23:54,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=3, votedFor=nacos-server-2:7848, cost time=761 ms

2024-03-20 01:23:54,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=3, votedFor=0.0.0.0:0, cost time=3240 ms

2024-03-20 01:23:54,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=3, votedFor=nacos-server-2:7848, cost time=760 ms

2024-03-20 01:23:54,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=3, votedFor=nacos-server-1:7848, cost time=3003 ms

2024-03-20 01:23:54,634 WARN Node <naming_instance_metadata/nacos-server-3:7848> received invalid PreVoteResponse from nacos-server-2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-03-20 01:23:54,633 INFO Node <naming_instance_metadata/nacos-server-1:7848> received RequestVoteRequest from nacos-server-3:7848, term=3, currTerm=3.

2024-03-20 01:23:54,634 INFO Node <naming_persistent_service_v2/nacos-server-1:7848> received RequestVoteRequest from nacos-server-2:7848, term=3, currTerm=3.

2024-03-20 01:23:54,640 WARN Node <naming_persistent_service_v2/nacos-server-1:7848> ignore stale AppendEntriesRequest from nacos-server-3:7848, term=2, currTerm=3.

2024-03-20 01:23:54,640 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos-server-3:7848, term=2, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-03-20 01:23:54,643 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos-server-1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:54,645 WARN Node <naming_persistent_service_v2/nacos-server-1:7848> received invalid PreVoteResponse from nacos-server-2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-03-20 01:23:54,649 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos-server-1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:54,666 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=3, votedFor=nacos-server-2:7848, cost time=125 ms

2024-03-20 01:23:54,671 INFO Node <naming_persistent_service_v2/nacos-server-3:7848> received RequestVoteRequest from nacos-server-1:7848, term=3, currTerm=3.

2024-03-20 01:23:54,671 INFO Node <naming_service_metadata/nacos-server-1:7848> become leader of group, term=3, conf=nacos-server-3:7848,nacos-server-2:7848,nacos-server-1:7848, oldConf=.

2024-03-20 01:23:54,673 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-3:7848, waitId=-1, type=Follower]@nacos-server-3:7848 is started

2024-03-20 01:23:54,674 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=3, votedFor=nacos-server-2:7848, cost time=41 ms

2024-03-20 01:23:54,674 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=3, votedFor=nacos-server-1:7848, cost time=45 ms

2024-03-20 01:23:54,684 INFO Replicator=Replicator [state=Created, statInfo=<running=null, firstLogIndex=0, lastLogIncluded=0, lastLogIndex=0, lastTermIncluded=0>, peerId=nacos-server-2:7848, waitId=-1, type=Follower]@nacos-server-2:7848 is started

2024-03-20 01:23:54,684 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos-server-3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:54,696 WARN Node <naming_service_metadata/nacos-server-1:7848> received invalid RequestVoteResponse from nacos-server-3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-03-20 01:23:54,691 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos-server-3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:54,691 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos-server-3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-03-20 01:23:54,724 INFO onLeaderStart: term=3.

